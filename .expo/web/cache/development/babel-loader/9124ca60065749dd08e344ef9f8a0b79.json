{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nvar _jsxFileName = \"/Users/sarahortiz/Senior-Design/screens/RecordMessage.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Slider from \"react-native-web/dist/exports/Slider\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport styles from \"../Style\";\nimport { Asset } from 'expo-asset';\nimport { Audio } from 'expo-av';\nimport * as FileSystem from 'expo-file-system';\nimport * as Permissions from 'expo-permissions';\n\nvar Icon = function Icon(module, width, height) {\n  _classCallCheck(this, Icon);\n\n  this.module = module;\n  this.width = width;\n  this.height = height;\n  Asset.fromModule(this.module).downloadAsync();\n};\n\nvar ICON_RECORD_BUTTON = new Icon(require(\"../assets/mic.png\"), 70, 119);\nvar ICON_RECORDING = new Icon(require(\"../assets/recording.png\"), 20, 14);\nvar ICON_PLAY_BUTTON = new Icon(require(\"../assets/play.png\"), 34, 51);\nvar ICON_PAUSE_BUTTON = new Icon(require(\"../assets/pause.png\"), 34, 51);\nvar ICON_STOP_BUTTON = new Icon(require(\"../assets/stop.png\"), 22, 22);\nvar ICON_MUTED_BUTTON = new Icon(require(\"../assets/mute.png\"), 67, 58);\nvar ICON_UNMUTED_BUTTON = new Icon(require(\"../assets/unmute.png\"), 67, 58);\n\nvar _Dimensions$get = Dimensions.get('window'),\n    DEVICE_WIDTH = _Dimensions$get.width,\n    DEVICE_HEIGHT = _Dimensions$get.height;\n\nvar BACKGROUND_COLOR = 'white';\nvar LIVE_COLOR = '#FF0000';\nvar DISABLED_OPACITY = 0.5;\nvar RATE_SCALE = 3.0;\n\nvar App = function (_React$Component) {\n  _inherits(App, _React$Component);\n\n  var _super = _createSuper(App);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _super.call(this, props);\n\n    _this._askForPermissions = function _callee() {\n      var response;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.AUDIO_RECORDING));\n\n            case 2:\n              response = _context.sent;\n\n              _this.setState({\n                haveRecordingPermissions: response.status === 'granted'\n              });\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this._updateScreenForSoundStatus = function (status) {\n      if (status.isLoaded) {\n        _this.setState({\n          soundDuration: status.durationMillis,\n          soundPosition: status.positionMillis,\n          shouldPlay: status.shouldPlay,\n          isPlaying: status.isPlaying,\n          rate: status.rate,\n          muted: status.isMuted,\n          volume: status.volume,\n          shouldCorrectPitch: status.shouldCorrectPitch,\n          isPlaybackAllowed: true\n        });\n      } else {\n        _this.setState({\n          soundDuration: null,\n          soundPosition: null,\n          isPlaybackAllowed: false\n        });\n\n        if (status.error) {\n          console.log(\"FATAL PLAYER ERROR: \" + status.error);\n        }\n      }\n    };\n\n    _this._updateScreenForRecordingStatus = function (status) {\n      if (status.canRecord) {\n        _this.setState({\n          isRecording: status.isRecording,\n          recordingDuration: status.durationMillis\n        });\n      } else if (status.isDoneRecording) {\n        _this.setState({\n          isRecording: false,\n          recordingDuration: status.durationMillis\n        });\n\n        if (!_this.state.isLoading) {\n          _this._stopRecordingAndEnablePlayback();\n        }\n      }\n    };\n\n    _this._onRecordPressed = function () {\n      if (_this.state.isRecording) {\n        _this._stopRecordingAndEnablePlayback();\n      } else {\n        _this._stopPlaybackAndBeginRecording();\n      }\n    };\n\n    _this._onPlayPausePressed = function () {\n      if (_this.sound != null) {\n        if (_this.state.isPlaying) {\n          _this.sound.pauseAsync();\n        } else {\n          _this.sound.playAsync();\n        }\n      }\n    };\n\n    _this._onStopPressed = function () {\n      if (_this.sound != null) {\n        _this.sound.stopAsync();\n      }\n    };\n\n    _this._onMutePressed = function () {\n      if (_this.sound != null) {\n        _this.sound.setIsMutedAsync(!_this.state.muted);\n      }\n    };\n\n    _this._onVolumeSliderValueChange = function (value) {\n      if (_this.sound != null) {\n        _this.sound.setVolumeAsync(value);\n      }\n    };\n\n    _this._trySetRate = function _callee2(rate, shouldCorrectPitch) {\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(_this.sound != null)) {\n                _context2.next = 8;\n                break;\n              }\n\n              _context2.prev = 1;\n              _context2.next = 4;\n              return _regeneratorRuntime.awrap(_this.sound.setRateAsync(rate, shouldCorrectPitch));\n\n            case 4:\n              _context2.next = 8;\n              break;\n\n            case 6:\n              _context2.prev = 6;\n              _context2.t0 = _context2[\"catch\"](1);\n\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, [[1, 6]], Promise);\n    };\n\n    _this._onRateSliderSlidingComplete = function _callee3(value) {\n      return _regeneratorRuntime.async(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _this._trySetRate(value * RATE_SCALE, _this.state.shouldCorrectPitch);\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this._onPitchCorrectionPressed = function _callee4(value) {\n      return _regeneratorRuntime.async(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _this._trySetRate(_this.state.rate, !_this.state.shouldCorrectPitch);\n\n            case 1:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this._onSeekSliderValueChange = function (value) {\n      if (_this.sound != null && !_this.isSeeking) {\n        _this.isSeeking = true;\n        _this.shouldPlayAtEndOfSeek = _this.state.shouldPlay;\n\n        _this.sound.pauseAsync();\n      }\n    };\n\n    _this._onSeekSliderSlidingComplete = function _callee5(value) {\n      var seekPosition;\n      return _regeneratorRuntime.async(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              if (_this.sound != null) {\n                _this.isSeeking = false;\n                seekPosition = value * _this.state.soundDuration;\n\n                if (_this.shouldPlayAtEndOfSeek) {\n                  _this.sound.playFromPositionAsync(seekPosition);\n                } else {\n                  _this.sound.setPositionAsync(seekPosition);\n                }\n              }\n\n            case 1:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.recording = null;\n    _this.sound = null;\n    _this.isSeeking = false;\n    _this.shouldPlayAtEndOfSeek = false;\n    _this.state = {\n      haveRecordingPermissions: false,\n      isLoading: false,\n      isPlaybackAllowed: false,\n      muted: false,\n      soundPosition: null,\n      soundDuration: null,\n      recordingDuration: null,\n      shouldPlay: false,\n      isPlaying: false,\n      isRecording: false,\n      shouldCorrectPitch: true,\n      volume: 1.0,\n      rate: 1.0\n    };\n    _this.recordingSettings = JSON.parse(JSON.stringify(Audio.RECORDING_OPTIONS_PRESET_LOW_QUALITY));\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this._askForPermissions();\n    }\n  }, {\n    key: \"_stopPlaybackAndBeginRecording\",\n    value: function _stopPlaybackAndBeginRecording() {\n      var recording;\n      return _regeneratorRuntime.async(function _stopPlaybackAndBeginRecording$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              this.setState({\n                isLoading: true\n              });\n\n              if (!(this.sound !== null)) {\n                _context6.next = 6;\n                break;\n              }\n\n              _context6.next = 4;\n              return _regeneratorRuntime.awrap(this.sound.unloadAsync());\n\n            case 4:\n              this.sound.setOnPlaybackStatusUpdate(null);\n              this.sound = null;\n\n            case 6:\n              _context6.next = 8;\n              return _regeneratorRuntime.awrap(Audio.setAudioModeAsync({\n                allowsRecordingIOS: true,\n                interruptionModeIOS: Audio.INTERRUPTION_MODE_IOS_DO_NOT_MIX,\n                playsInSilentModeIOS: true,\n                shouldDuckAndroid: true,\n                interruptionModeAndroid: Audio.INTERRUPTION_MODE_ANDROID_DO_NOT_MIX,\n                playThroughEarpieceAndroid: false,\n                staysActiveInBackground: true\n              }));\n\n            case 8:\n              if (this.recording !== null) {\n                this.recording.setOnRecordingStatusUpdate(null);\n                this.recording = null;\n              }\n\n              recording = new Audio.Recording();\n              _context6.next = 12;\n              return _regeneratorRuntime.awrap(recording.prepareToRecordAsync(this.recordingSettings));\n\n            case 12:\n              recording.setOnRecordingStatusUpdate(this._updateScreenForRecordingStatus);\n              this.recording = recording;\n              _context6.next = 16;\n              return _regeneratorRuntime.awrap(this.recording.startAsync());\n\n            case 16:\n              this.setState({\n                isLoading: false\n              });\n\n            case 17:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"_stopRecordingAndEnablePlayback\",\n    value: function _stopRecordingAndEnablePlayback() {\n      var info, _await$this$recording, sound, status;\n\n      return _regeneratorRuntime.async(function _stopRecordingAndEnablePlayback$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              this.setState({\n                isLoading: true\n              });\n              _context7.prev = 1;\n              _context7.next = 4;\n              return _regeneratorRuntime.awrap(this.recording.stopAndUnloadAsync());\n\n            case 4:\n              _context7.next = 8;\n              break;\n\n            case 6:\n              _context7.prev = 6;\n              _context7.t0 = _context7[\"catch\"](1);\n\n            case 8:\n              _context7.next = 10;\n              return _regeneratorRuntime.awrap(FileSystem.getInfoAsync(this.recording.getURI()));\n\n            case 10:\n              info = _context7.sent;\n              console.log(\"FILE INFO: \" + JSON.stringify(info));\n              _context7.next = 14;\n              return _regeneratorRuntime.awrap(Audio.setAudioModeAsync({\n                allowsRecordingIOS: false,\n                interruptionModeIOS: Audio.INTERRUPTION_MODE_IOS_DO_NOT_MIX,\n                playsInSilentModeIOS: true,\n                playsInSilentLockedModeIOS: true,\n                shouldDuckAndroid: true,\n                interruptionModeAndroid: Audio.INTERRUPTION_MODE_ANDROID_DO_NOT_MIX,\n                playThroughEarpieceAndroid: false,\n                staysActiveInBackground: true\n              }));\n\n            case 14:\n              _context7.next = 16;\n              return _regeneratorRuntime.awrap(this.recording.createNewLoadedSoundAsync({\n                isLooping: true,\n                isMuted: this.state.muted,\n                volume: this.state.volume,\n                rate: this.state.rate,\n                shouldCorrectPitch: this.state.shouldCorrectPitch\n              }, this._updateScreenForSoundStatus));\n\n            case 16:\n              _await$this$recording = _context7.sent;\n              sound = _await$this$recording.sound;\n              status = _await$this$recording.status;\n              this.sound = sound;\n              this.setState({\n                isLoading: false\n              });\n\n            case 21:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, null, this, [[1, 6]], Promise);\n    }\n  }, {\n    key: \"_getSeekSliderPosition\",\n    value: function _getSeekSliderPosition() {\n      if (this.sound != null && this.state.soundPosition != null && this.state.soundDuration != null) {\n        return this.state.soundPosition / this.state.soundDuration;\n      }\n\n      return 0;\n    }\n  }, {\n    key: \"_getMMSSFromMillis\",\n    value: function _getMMSSFromMillis(millis) {\n      var totalSeconds = millis / 1000;\n      var seconds = Math.floor(totalSeconds % 60);\n      var minutes = Math.floor(totalSeconds / 60);\n\n      var padWithZero = function padWithZero(number) {\n        var string = number.toString();\n\n        if (number < 10) {\n          return '0' + string;\n        }\n\n        return string;\n      };\n\n      return padWithZero(minutes) + ':' + padWithZero(seconds);\n    }\n  }, {\n    key: \"_getPlaybackTimestamp\",\n    value: function _getPlaybackTimestamp() {\n      if (this.sound != null && this.state.soundPosition != null && this.state.soundDuration != null) {\n        return this._getMMSSFromMillis(this.state.soundPosition) + \" / \" + this._getMMSSFromMillis(this.state.soundDuration);\n      }\n\n      return '';\n    }\n  }, {\n    key: \"_getRecordingTimestamp\",\n    value: function _getRecordingTimestamp() {\n      if (this.state.recordingDuration != null) {\n        return \"\" + this._getMMSSFromMillis(this.state.recordingDuration);\n      }\n\n      return \"\" + this._getMMSSFromMillis(0);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (!this.state.haveRecordingPermissions) {\n        return React.createElement(View, {\n          style: styles.container,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 13\n          }\n        }, React.createElement(View, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 17\n          }\n        }), React.createElement(Text, {\n          style: styles.noPermissionsText,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 17\n          }\n        }, \"You must enable audio recording permissions in order to use this app.\"), React.createElement(View, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 17\n          }\n        }));\n      }\n\n      return React.createElement(View, {\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 3\n        }\n      }, React.createElement(View, {\n        style: styles.header,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 4\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return Linking.openURL('https://cluster-nicaragua.net/organizaciones/centro-de-informacion-e-innovacion-asociacion-de-desarrollo-social-de-nicaragua');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 5\n        }\n      }, React.createElement(Image, {\n        source: require(\"../assets/asdenic.png\"),\n        style: styles.asdenicLogo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 15\n        }\n      })), React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return Linking.openURL('https://www.scu.edu/engineering/labs--research/labs/frugal-innovation-hub/');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 11\n        }\n      }, React.createElement(Image, {\n        source: require(\"../assets/frugalHub.png\"),\n        style: styles.frugalHubLogo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 15\n        }\n      })), React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this2.props.navigation.navigate('Welcome');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 5\n        }\n      }, React.createElement(Text, {\n        style: styles.logoutButton,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 6\n        }\n      }, \"Cerrar sesi\\xF3n\"))), React.createElement(View, {\n        style: styles.audioPageContent,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 4\n        }\n      }, React.createElement(View, {\n        style: [styles.halfScreenContainer, {\n          opacity: this.state.isLoading ? DISABLED_OPACITY : 1.0\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 5\n        }\n      }, React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 5\n        }\n      }), React.createElement(View, {\n        style: styles.recordingContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 5\n        }\n      }, React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 6\n        }\n      }), React.createElement(TouchableHighlight, {\n        underlayColor: BACKGROUND_COLOR,\n        style: styles.wrapper,\n        onPress: this._onRecordPressed,\n        disabled: this.state.isLoading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 6\n        }\n      }, React.createElement(Image, {\n        style: styles.micRecord,\n        source: ICON_RECORD_BUTTON.module,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 7\n        }\n      })), React.createElement(View, {\n        style: styles.recordingDataContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 6\n        }\n      }, React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 7\n        }\n      }), React.createElement(Text, {\n        style: styles.liveText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 7\n        }\n      }, this.state.isRecording ? 'LIVE' : ''), React.createElement(View, {\n        style: styles.recordingDataRowContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 7\n        }\n      }, React.createElement(Image, {\n        style: [styles.recording, {\n          opacity: this.state.isRecording ? 1.0 : 0.0\n        }],\n        source: ICON_RECORDING.module,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 8\n        }\n      }), React.createElement(Text, {\n        style: styles.recordingTimestamp,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 8\n        }\n      }, this._getRecordingTimestamp())), React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 7\n        }\n      })), React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 6\n        }\n      })), React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 5\n        }\n      })), React.createElement(View, {\n        style: [styles.halfScreenContainer, {\n          opacity: !this.state.isPlaybackAllowed || this.state.isLoading ? DISABLED_OPACITY : 1.0\n        }],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 5\n        }\n      }, React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 6\n        }\n      }), React.createElement(View, {\n        style: styles.playbackContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 6\n        }\n      }, React.createElement(Slider, {\n        style: [styles.playbackSlider, {\n          width: 370,\n          height: 40\n        }],\n        minimumTrackTintColor: \"#000000\",\n        maximumTrackTintColor: \"grey\",\n        value: this._getSeekSliderPosition(),\n        onValueChange: this._onSeekSliderValueChange,\n        onSlidingComplete: this._onSeekSliderSlidingComplete,\n        disabled: !this.state.isPlaybackAllowed || this.state.isLoading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 7\n        }\n      }), React.createElement(Text, {\n        style: styles.playbackTimestamp,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 7\n        }\n      }, this._getPlaybackTimestamp())), React.createElement(View, {\n        style: [styles.buttonsContainerBase, styles.buttonsContainerTopRow],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 6\n        }\n      }, React.createElement(View, {\n        style: styles.volumeContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 7\n        }\n      }, React.createElement(TouchableHighlight, {\n        underlayColor: BACKGROUND_COLOR,\n        style: styles.wrapper,\n        onPress: this._onMutePressed,\n        disabled: !this.state.isPlaybackAllowed || this.state.isLoading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 7\n        }\n      }, React.createElement(Image, {\n        style: styles.mute,\n        source: this.state.muted ? ICON_MUTED_BUTTON.module : ICON_UNMUTED_BUTTON.module,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 8\n        }\n      })), React.createElement(Slider, {\n        style: [styles.volumeSlider, {\n          width: 200,\n          height: 40\n        }],\n        minimumValue: 0,\n        maximumValue: 1,\n        minimumTrackTintColor: \"#000000\",\n        maximumTrackTintColor: \"grey\",\n        value: 1,\n        onValueChange: this._onVolumeSliderValueChange,\n        disabled: !this.state.isPlaybackAllowed || this.state.isLoading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 7\n        }\n      })), React.createElement(View, {\n        style: styles.playStopContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 7\n        }\n      }, React.createElement(TouchableHighlight, {\n        underlayColor: BACKGROUND_COLOR,\n        style: styles.wrapper,\n        onPress: this._onPlayPausePressed,\n        disabled: !this.state.isPlaybackAllowed || this.state.isLoading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 8\n        }\n      }, React.createElement(Image, {\n        style: styles.play,\n        source: this.state.isPlaying ? ICON_PAUSE_BUTTON.module : ICON_PLAY_BUTTON.module,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 9\n        }\n      })), React.createElement(TouchableHighlight, {\n        underlayColor: BACKGROUND_COLOR,\n        style: styles.wrapper,\n        onPress: this._onStopPressed,\n        disabled: !this.state.isPlaybackAllowed || this.state.isLoading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 8\n        }\n      }, React.createElement(Image, {\n        style: styles.stop,\n        source: ICON_STOP_BUTTON.module,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 9\n        }\n      }))), React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 6\n        }\n      })), React.createElement(View, {\n        style: [styles.buttonsContainerBase, styles.buttonsContainerBottomRow],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 6\n        }\n      }, React.createElement(Text, {\n        style: styles.timestamp,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 7\n        }\n      }, \"Rate:\"), React.createElement(Slider, {\n        style: [styles.rateSlider, {\n          width: 200,\n          height: 40\n        }],\n        minimumValue: 0,\n        maximumValue: 1,\n        minimumTrackTintColor: \"#000000\",\n        maximumTrackTintColor: \"grey\",\n        value: this.state.rate / RATE_SCALE,\n        onSlidingComplete: this._onRateSliderSlidingComplete,\n        disabled: !this.state.isPlaybackAllowed || this.state.isLoading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 7\n        }\n      }), React.createElement(TouchableHighlight, {\n        underlayColor: BACKGROUND_COLOR,\n        style: styles.wrapper,\n        onPress: this._onPitchCorrectionPressed,\n        disabled: !this.state.isPlaybackAllowed || this.state.isLoading,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 7\n        }\n      }, React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 8\n        }\n      }, \"PC: \", this.state.shouldCorrectPitch ? 'yes' : 'no'))), React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 6\n        }\n      }))), React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 4\n        }\n      }, React.createElement(TouchableOpacity, {\n        style: styles.uploadAudioButton,\n        onPress: function onPress() {\n          _this2.props.navigation.navigate('CreateNewWaterQualityReport', {\n            sound: _this2.sound\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 5\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontSize: 17,\n          color: 'white',\n          fontWeight: 'bold'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 6\n        }\n      }, \"Cargar\"))), React.createElement(View, {\n        style: styles.footer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 4\n        }\n      }));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nexport { App as default };","map":{"version":3,"sources":["/Users/sarahortiz/Senior-Design/screens/RecordMessage.js"],"names":["React","styles","Asset","Audio","FileSystem","Permissions","Icon","module","width","height","fromModule","downloadAsync","ICON_RECORD_BUTTON","require","ICON_RECORDING","ICON_PLAY_BUTTON","ICON_PAUSE_BUTTON","ICON_STOP_BUTTON","ICON_MUTED_BUTTON","ICON_UNMUTED_BUTTON","Dimensions","get","DEVICE_WIDTH","DEVICE_HEIGHT","BACKGROUND_COLOR","LIVE_COLOR","DISABLED_OPACITY","RATE_SCALE","App","props","_askForPermissions","askAsync","AUDIO_RECORDING","response","setState","haveRecordingPermissions","status","_updateScreenForSoundStatus","isLoaded","soundDuration","durationMillis","soundPosition","positionMillis","shouldPlay","isPlaying","rate","muted","isMuted","volume","shouldCorrectPitch","isPlaybackAllowed","error","console","log","_updateScreenForRecordingStatus","canRecord","isRecording","recordingDuration","isDoneRecording","state","isLoading","_stopRecordingAndEnablePlayback","_onRecordPressed","_stopPlaybackAndBeginRecording","_onPlayPausePressed","sound","pauseAsync","playAsync","_onStopPressed","stopAsync","_onMutePressed","setIsMutedAsync","_onVolumeSliderValueChange","value","setVolumeAsync","_trySetRate","setRateAsync","_onRateSliderSlidingComplete","_onPitchCorrectionPressed","_onSeekSliderValueChange","isSeeking","shouldPlayAtEndOfSeek","_onSeekSliderSlidingComplete","seekPosition","playFromPositionAsync","setPositionAsync","recording","recordingSettings","JSON","parse","stringify","RECORDING_OPTIONS_PRESET_LOW_QUALITY","unloadAsync","setOnPlaybackStatusUpdate","setAudioModeAsync","allowsRecordingIOS","interruptionModeIOS","INTERRUPTION_MODE_IOS_DO_NOT_MIX","playsInSilentModeIOS","shouldDuckAndroid","interruptionModeAndroid","INTERRUPTION_MODE_ANDROID_DO_NOT_MIX","playThroughEarpieceAndroid","staysActiveInBackground","setOnRecordingStatusUpdate","Recording","prepareToRecordAsync","startAsync","stopAndUnloadAsync","getInfoAsync","getURI","info","playsInSilentLockedModeIOS","createNewLoadedSoundAsync","isLooping","millis","totalSeconds","seconds","Math","floor","minutes","padWithZero","number","string","toString","_getMMSSFromMillis","container","noPermissionsText","header","Linking","openURL","asdenicLogo","frugalHubLogo","navigation","navigate","logoutButton","audioPageContent","halfScreenContainer","opacity","recordingContainer","wrapper","micRecord","recordingDataContainer","liveText","recordingDataRowContainer","recordingTimestamp","_getRecordingTimestamp","playbackContainer","playbackSlider","_getSeekSliderPosition","playbackTimestamp","_getPlaybackTimestamp","buttonsContainerBase","buttonsContainerTopRow","volumeContainer","mute","volumeSlider","playStopContainer","play","stop","buttonsContainerBottomRow","timestamp","rateSlider","uploadAudioButton","fontSize","color","fontWeight","footer","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Dimensions, Image, TouchableOpacity, Slider, Text, TouchableHighlight, View, Linking } from 'react-native';\nimport styles from '../Style';\nimport { Asset } from 'expo-asset';\nimport { Audio } from 'expo-av';\nimport * as FileSystem from 'expo-file-system';\n//import * as Font from 'expo-font';\nimport * as Permissions from 'expo-permissions';\n\nclass Icon {\n  constructor(module, width, height) {\n    this.module = module;\n    this.width = width;\n    this.height = height;\n    Asset.fromModule(this.module).downloadAsync();\n  }\n}\n\nconst ICON_RECORD_BUTTON = new Icon(require('../assets/mic.png'), 70, 119);\nconst ICON_RECORDING = new Icon(require('../assets/recording.png'), 20, 14);\n\nconst ICON_PLAY_BUTTON = new Icon(require('../assets/play.png'), 34, 51);\nconst ICON_PAUSE_BUTTON = new Icon(require('../assets/pause.png'), 34, 51);\nconst ICON_STOP_BUTTON = new Icon(require('../assets/stop.png'), 22, 22);\n\nconst ICON_MUTED_BUTTON = new Icon(require('../assets/mute.png'), 67, 58);\nconst ICON_UNMUTED_BUTTON = new Icon(require('../assets/unmute.png'), 67, 58);\n\nconst { width: DEVICE_WIDTH, height: DEVICE_HEIGHT } = Dimensions.get('window');\nconst BACKGROUND_COLOR = 'white';\nconst LIVE_COLOR = '#FF0000';\nconst DISABLED_OPACITY = 0.5;\nconst RATE_SCALE = 3.0;\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.recording = null;\n    this.sound = null;\n    this.isSeeking = false;\n    this.shouldPlayAtEndOfSeek = false;\n    this.state = {\n      haveRecordingPermissions: false,\n      isLoading: false,\n      isPlaybackAllowed: false,\n      muted: false,\n      soundPosition: null,\n      soundDuration: null,\n      recordingDuration: null,\n      shouldPlay: false,\n      isPlaying: false,\n      isRecording: false,\n      //fontLoaded: false,\n      shouldCorrectPitch: true,\n      volume: 1.0,\n      rate: 1.0,\n    };\n    this.recordingSettings = JSON.parse(JSON.stringify(Audio.RECORDING_OPTIONS_PRESET_LOW_QUALITY));\n    // // UNCOMMENT THIS TO TEST maxFileSize:\n    // this.recordingSettings.android['maxFileSize'] = 12000;\n  }\n\n  componentDidMount() {\n    // (async () => {\n    //   await Font.loadAsync({\n    //     'cutive-mono-regular': require('./assets/fonts/CutiveMono-Regular.ttf'),\n    //   });\n    //   this.setState({ fontLoaded: true });\n    // })();\n    this._askForPermissions();\n  }\n\n  _askForPermissions = async () => {\n    const response = await Permissions.askAsync(Permissions.AUDIO_RECORDING);\n    this.setState({\n      haveRecordingPermissions: response.status === 'granted',\n    });\n  };\n\n  _updateScreenForSoundStatus = status => {\n    if (status.isLoaded) {\n      this.setState({\n        soundDuration: status.durationMillis,\n        soundPosition: status.positionMillis,\n        shouldPlay: status.shouldPlay,\n        isPlaying: status.isPlaying,\n        rate: status.rate,\n        muted: status.isMuted,\n        volume: status.volume,\n        shouldCorrectPitch: status.shouldCorrectPitch,\n        isPlaybackAllowed: true,\n      });\n    } else {\n      this.setState({\n        soundDuration: null,\n        soundPosition: null,\n        isPlaybackAllowed: false,\n      });\n      if (status.error) {\n        console.log(`FATAL PLAYER ERROR: ${status.error}`);\n      }\n    }\n  };\n\n  _updateScreenForRecordingStatus = status => {\n    if (status.canRecord) {\n      this.setState({\n        isRecording: status.isRecording,\n        recordingDuration: status.durationMillis,\n      });\n    } else if (status.isDoneRecording) {\n      this.setState({\n        isRecording: false,\n        recordingDuration: status.durationMillis,\n      });\n      if (!this.state.isLoading) {\n        this._stopRecordingAndEnablePlayback();\n      }\n    }\n  };\n\n  async _stopPlaybackAndBeginRecording() {\n    this.setState({\n      isLoading: true,\n    });\n    if (this.sound !== null) {\n      await this.sound.unloadAsync();\n      this.sound.setOnPlaybackStatusUpdate(null);\n      this.sound = null;\n    }\n    await Audio.setAudioModeAsync({\n      allowsRecordingIOS: true,\n      interruptionModeIOS: Audio.INTERRUPTION_MODE_IOS_DO_NOT_MIX,\n      playsInSilentModeIOS: true,\n      shouldDuckAndroid: true,\n      interruptionModeAndroid: Audio.INTERRUPTION_MODE_ANDROID_DO_NOT_MIX,\n      playThroughEarpieceAndroid: false,\n      staysActiveInBackground: true,\n    });\n    if (this.recording !== null) {\n      this.recording.setOnRecordingStatusUpdate(null);\n      this.recording = null;\n    }\n\n    const recording = new Audio.Recording();\n    await recording.prepareToRecordAsync(this.recordingSettings);\n    recording.setOnRecordingStatusUpdate(this._updateScreenForRecordingStatus);\n\n    this.recording = recording;\n    await this.recording.startAsync(); // Will call this._updateScreenForRecordingStatus to update the screen.\n    this.setState({\n      isLoading: false,\n    });\n  }\n\n  async _stopRecordingAndEnablePlayback() {\n    this.setState({\n      isLoading: true,\n    });\n    try {\n      await this.recording.stopAndUnloadAsync();\n    } catch (error) {\n      // Do nothing -- we are already unloaded.\n    }\n    const info = await FileSystem.getInfoAsync(this.recording.getURI());\n    console.log(`FILE INFO: ${JSON.stringify(info)}`);\n    await Audio.setAudioModeAsync({\n      allowsRecordingIOS: false,\n      interruptionModeIOS: Audio.INTERRUPTION_MODE_IOS_DO_NOT_MIX,\n      playsInSilentModeIOS: true,\n      playsInSilentLockedModeIOS: true,\n      shouldDuckAndroid: true,\n      interruptionModeAndroid: Audio.INTERRUPTION_MODE_ANDROID_DO_NOT_MIX,\n      playThroughEarpieceAndroid: false,\n      staysActiveInBackground: true,\n    });\n    const { sound, status } = await this.recording.createNewLoadedSoundAsync(\n      {\n        isLooping: true,\n        isMuted: this.state.muted,\n        volume: this.state.volume,\n        rate: this.state.rate,\n        shouldCorrectPitch: this.state.shouldCorrectPitch,\n      },\n      this._updateScreenForSoundStatus\n    );\n    this.sound = sound;\n    this.setState({\n      isLoading: false,\n    });\n  }\n\n  _onRecordPressed = () => {\n    if (this.state.isRecording) {\n      this._stopRecordingAndEnablePlayback();\n    } else {\n      this._stopPlaybackAndBeginRecording();\n    }\n  };\n\n  _onPlayPausePressed = () => {\n    if (this.sound != null) {\n      if (this.state.isPlaying) {\n        this.sound.pauseAsync();\n      } else {\n        this.sound.playAsync();\n      }\n    }\n  };\n\n  _onStopPressed = () => {\n    if (this.sound != null) {\n      this.sound.stopAsync();\n    }\n  };\n\n  _onMutePressed = () => {\n    if (this.sound != null) {\n      this.sound.setIsMutedAsync(!this.state.muted);\n    }\n  };\n\n  _onVolumeSliderValueChange = value => {\n    if (this.sound != null) {\n      this.sound.setVolumeAsync(value);\n    }\n  };\n\n  _trySetRate = async (rate, shouldCorrectPitch) => {\n    if (this.sound != null) {\n      try {\n        await this.sound.setRateAsync(rate, shouldCorrectPitch);\n      } catch (error) {\n        // Rate changing could not be performed, possibly because the client's Android API is too old.\n      }\n    }\n  };\n\n  _onRateSliderSlidingComplete = async value => {\n    this._trySetRate(value * RATE_SCALE, this.state.shouldCorrectPitch);\n  };\n\n  _onPitchCorrectionPressed = async value => {\n    this._trySetRate(this.state.rate, !this.state.shouldCorrectPitch);\n  };\n\n  _onSeekSliderValueChange = value => {\n    if (this.sound != null && !this.isSeeking) {\n      this.isSeeking = true;\n      this.shouldPlayAtEndOfSeek = this.state.shouldPlay;\n      this.sound.pauseAsync();\n    }\n  };\n\n  _onSeekSliderSlidingComplete = async value => {\n    if (this.sound != null) {\n      this.isSeeking = false;\n      const seekPosition = value * this.state.soundDuration;\n      if (this.shouldPlayAtEndOfSeek) {\n        this.sound.playFromPositionAsync(seekPosition);\n      } else {\n        this.sound.setPositionAsync(seekPosition);\n      }\n    }\n  };\n\n  _getSeekSliderPosition() {\n    if (\n      this.sound != null &&\n      this.state.soundPosition != null &&\n      this.state.soundDuration != null\n    ) {\n      return this.state.soundPosition / this.state.soundDuration;\n    }\n    return 0;\n  }\n\n  _getMMSSFromMillis(millis) {\n    const totalSeconds = millis / 1000;\n    const seconds = Math.floor(totalSeconds % 60);\n    const minutes = Math.floor(totalSeconds / 60);\n\n    const padWithZero = number => {\n      const string = number.toString();\n      if (number < 10) {\n        return '0' + string;\n      }\n      return string;\n    };\n    return padWithZero(minutes) + ':' + padWithZero(seconds);\n  }\n\n  _getPlaybackTimestamp() {\n    if (\n      this.sound != null &&\n      this.state.soundPosition != null &&\n      this.state.soundDuration != null\n    ) {\n      return `${this._getMMSSFromMillis(this.state.soundPosition)} / ${this._getMMSSFromMillis(\n        this.state.soundDuration\n      )}`;\n    }\n    return '';\n  }\n\n  _getRecordingTimestamp() {\n    if (this.state.recordingDuration != null) {\n      return `${this._getMMSSFromMillis(this.state.recordingDuration)}`;\n    }\n    return `${this._getMMSSFromMillis(0)}`;\n  }\n\n  render() {\n    if (!this.state.haveRecordingPermissions){\n        return (\n            <View style={styles.container}>\n                <View />\n                <Text style={styles.noPermissionsText}>\n                  You must enable audio recording permissions in order to use this app.\n                </Text>\n                <View />\n            </View>\n        )\n    }\n\n    return (\n\t\t<View style={styles.container}>\n\t\t\t<View style={styles.header}>\n\t\t\t\t<TouchableOpacity\n              onPress={() => Linking.openURL('https://cluster-nicaragua.net/organizaciones/centro-de-informacion-e-innovacion-asociacion-de-desarrollo-social-de-nicaragua')}>\n              <Image source={require('../assets/asdenic.png')} style={styles.asdenicLogo}/>\n          </TouchableOpacity>\n\n          <TouchableOpacity\n              onPress={() => Linking.openURL('https://www.scu.edu/engineering/labs--research/labs/frugal-innovation-hub/')}>\n              <Image source={require('../assets/frugalHub.png')} style={styles.frugalHubLogo}/>\n          </TouchableOpacity>\n\n\t\t\t\t<TouchableOpacity\n\t\t\t\t\tonPress={() => this.props.navigation.navigate('Welcome')}>\n\t\t\t\t\t<Text style={styles.logoutButton}>Cerrar sesin</Text>\n\t\t\t\t</TouchableOpacity>\n\t\t\t</View>\n\n\t\t\t<View style={styles.audioPageContent}>\n\t\t\t\t<View style={[styles.halfScreenContainer, { opacity: this.state.isLoading ? DISABLED_OPACITY : 1.0, },]}>\n\t\t\t\t<View />\n\t\t\t\t<View style={styles.recordingContainer}>\n\t\t\t\t\t<View />\n\t\t\t\t\t<TouchableHighlight\n\t\t\t\t\t\tunderlayColor={BACKGROUND_COLOR}\n\t\t\t\t\t\tstyle={styles.wrapper}\n\t\t\t\t\t\tonPress={this._onRecordPressed}\n\t\t\t\t\t\tdisabled={this.state.isLoading}>\n\t\t\t\t\t\t<Image style={styles.micRecord} source={ICON_RECORD_BUTTON.module} />\n\t\t\t\t\t</TouchableHighlight>\n\n\t\t\t\t\t<View style={styles.recordingDataContainer}>\n\t\t\t\t\t\t<View />\n\t\t\t\t\t\t<Text style={styles.liveText}>\n\t\t\t\t\t\t\t{this.state.isRecording ? 'LIVE' : ''}\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t<View style={styles.recordingDataRowContainer}>\n\t\t\t\t\t\t\t<Image style={[styles.recording, { opacity: this.state.isRecording ? 1.0 : 0.0 }]} source={ICON_RECORDING.module}/>\n\t\t\t\t\t\t\t<Text style={styles.recordingTimestamp}>\n\t\t\t\t\t\t\t\t{this._getRecordingTimestamp()}\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t</View>\n\t\t\t\t\t\t<View />\n\t\t\t\t\t</View>\n\t\t\t\t\t<View />\n\t\t\t\t</View>\n\t\t\t\t<View />\n\t\t\t\t</View>\n\n\t\t\t\t<View style={[styles.halfScreenContainer, {opacity: !this.state.isPlaybackAllowed || this.state.isLoading ? DISABLED_OPACITY : 1.0,},]}>\n\t\t\t\t\t<View />\n\t\t\t\t\t<View style={styles.playbackContainer}>\n\t\t\t\t\t\t<Slider\n\t\t\t\t\t\t\tstyle={[styles.playbackSlider, {width: 370, height: 40}]}\n\t\t\t\t\t\t\tminimumTrackTintColor=\"#000000\"\n\t\t\t\t\t\t\tmaximumTrackTintColor=\"grey\"\n\t\t\t\t\t\t\tvalue={this._getSeekSliderPosition()}\n\t\t\t\t\t\t\tonValueChange={this._onSeekSliderValueChange}\n\t\t\t\t\t\t\tonSlidingComplete={this._onSeekSliderSlidingComplete}\n\t\t\t\t\t\t\tdisabled={!this.state.isPlaybackAllowed || this.state.isLoading}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Text style={styles.playbackTimestamp}>\n\t\t\t\t\t\t\t{this._getPlaybackTimestamp()}\n\t\t\t\t\t\t</Text>\n\t\t\t\t\t</View>\n\n\t\t\t\t\t<View style={[styles.buttonsContainerBase, styles.buttonsContainerTopRow]}>\n\t\t\t\t\t\t<View style={styles.volumeContainer}>\n\t\t\t\t\t\t<TouchableHighlight\n\t\t\t\t\t\t\tunderlayColor={BACKGROUND_COLOR}\n\t\t\t\t\t\t\tstyle={styles.wrapper}\n\t\t\t\t\t\t\tonPress={this._onMutePressed}\n\t\t\t\t\t\t\tdisabled={!this.state.isPlaybackAllowed || this.state.isLoading}>\n\t\t\t\t\t\t\t<Image style={styles.mute} source={this.state.muted ? ICON_MUTED_BUTTON.module : ICON_UNMUTED_BUTTON.module}/>\n\t\t\t\t\t\t</TouchableHighlight>\n\t\t\t\t\t\t<Slider\n\t\t\t\t\t\t\tstyle={[styles.volumeSlider, {width: 200, height: 40}]}\n\t\t\t\t\t\t\tminimumValue={0}\n\t\t\t\t\t\t\tmaximumValue={1}\n\t\t\t\t\t\t\tminimumTrackTintColor=\"#000000\"\n\t\t\t\t\t\t\tmaximumTrackTintColor=\"grey\"\n\t\t\t\t\t\t\tvalue={1}\n\t\t\t\t\t\t\tonValueChange={this._onVolumeSliderValueChange}\n\t\t\t\t\t\t\tdisabled={!this.state.isPlaybackAllowed || this.state.isLoading}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t</View>\n\n\t\t\t\t\t\t<View style={styles.playStopContainer}>\n\t\t\t\t\t\t\t<TouchableHighlight\n\t\t\t\t\t\t\t\tunderlayColor={BACKGROUND_COLOR}\n\t\t\t\t\t\t\t\tstyle={styles.wrapper}\n\t\t\t\t\t\t\t\tonPress={this._onPlayPausePressed}\n\t\t\t\t\t\t\t\tdisabled={!this.state.isPlaybackAllowed || this.state.isLoading}>\n\t\t\t\t\t\t\t\t<Image style={styles.play} source={this.state.isPlaying ? ICON_PAUSE_BUTTON.module : ICON_PLAY_BUTTON.module}/>\n\t\t\t\t\t\t\t</TouchableHighlight>\n\t\t\t\t\t\t\t<TouchableHighlight\n\t\t\t\t\t\t\t\tunderlayColor={BACKGROUND_COLOR}\n\t\t\t\t\t\t\t\tstyle={styles.wrapper}\n\t\t\t\t\t\t\t\tonPress={this._onStopPressed}\n\t\t\t\t\t\t\t\tdisabled={!this.state.isPlaybackAllowed || this.state.isLoading}>\n\t\t\t\t\t\t\t\t<Image style={styles.stop} source={ICON_STOP_BUTTON.module} />\n\t\t\t\t\t\t\t</TouchableHighlight>\n\t\t\t\t\t\t</View>\n\t\t\t\t\t<View />\n\t\t\t\t\t</View>\n\n\t\t\t\t\t<View style={[styles.buttonsContainerBase, styles.buttonsContainerBottomRow]}>\n\t\t\t\t\t\t<Text style={styles.timestamp}>Rate:</Text>\n\t\t\t\t\t\t<Slider\n\t\t\t\t\t\t\tstyle={[styles.rateSlider, {width: 200, height: 40}]}\n\t\t\t\t\t\t\tminimumValue={0}\n\t\t\t\t\t\t\tmaximumValue={1}\n\t\t\t\t\t\t\tminimumTrackTintColor=\"#000000\"\n\t\t\t\t\t\t\tmaximumTrackTintColor=\"grey\"\n\t\t\t\t\t\t\tvalue={this.state.rate / RATE_SCALE}\n\t\t\t\t\t\t\tonSlidingComplete={this._onRateSliderSlidingComplete}\n\t\t\t\t\t\t\tdisabled={!this.state.isPlaybackAllowed || this.state.isLoading}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<TouchableHighlight\n\t\t\t\t\t\t\tunderlayColor={BACKGROUND_COLOR}\n\t\t\t\t\t\t\tstyle={styles.wrapper}\n\t\t\t\t\t\t\tonPress={this._onPitchCorrectionPressed}\n\t\t\t\t\t\t\tdisabled={!this.state.isPlaybackAllowed || this.state.isLoading}>\n\t\t\t\t\t\t\t<Text>PC: {this.state.shouldCorrectPitch ? 'yes' : 'no'}</Text>\n\t\t\t\t\t\t</TouchableHighlight>\n\t\t\t\t\t</View>\n\t\t\t\t\t<View />\n\t\t\t\t</View>\n\t\t\t</View>\n\n\t\t\t<View>\n\t\t\t\t<TouchableOpacity style={styles.uploadAudioButton}\n\t\t\t\t\tonPress={() => { this.props.navigation.navigate('CreateNewWaterQualityReport', { \n\t\t\t\t\t\t\t\t\t\t\tsound: this.sound, \n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t<Text style={{fontSize: 17, color: 'white', fontWeight: 'bold'}}>Cargar</Text>\n\t\t\t\t</TouchableOpacity> \n\t\t\t</View>\n\t\t\t\n\t\t\t<View style={styles.footer}>\n\t\t\t</View>\n\t\t</View>\n    );\n  }\n}"]},"metadata":{},"sourceType":"module"}